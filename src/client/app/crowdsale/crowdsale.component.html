<div fxFlexFill fxLayout="row" fxLayoutAlign="center center" *ngIf="!readyToDisplay">
  <md-spinner class="main-spinner"></md-spinner>
</div>
<div fxLayout="row" fxLayoutAlign="center center" *ngIf="(!orders || orders.length === 0) && readyToDisplay" class="no-orders"
     [@shortEnterAnimation]>
  <p>No open orders!</p>
</div>
<div *ngIf="readyToDisplay" [@shortEnterAnimation]>
  <div fxLayout="column" fxFill class="relative-container">
    <div id="top-row" fxLayout="row" fxLayoutAlign="space-between">
      <h2>Order book</h2>
    </div>

    <div fxLayout="column" id="orders">
      <div fxLayout="row" fxFlex="100" class="item-wrapper unselectable pointer transition-fast"
           *ngFor="let order of orders | sortBuyAndSellOrdersByTypeAndPriceDescendingPipe; let index = index;"
           (click)="tradeOrder(order.orderType, order.id)">
        <div fxLayout="row" fxFlex="100" class="item unselectable pointer item-background-transition-fast"
             *ngIf="order.isOpen && !order.isLocked" (mouseenter)="styleRow($event)" (mouseleave)="styleRow($event)"
             [@flashAnimation]="order.flashAnimation"
             [ngClass]="{'fat-border-bottom': buyOrdersLength && buyOrdersLength > 0 && index === sellOrdersLength - 1,
                         'item-border-top': index === calculateFirstVisibleItemIndex()}">
          <div fxLayout="row" fxLayoutAlign="space-between" fxFlex="100">
            <div fxLayout="row" class="break-long-words">
              <div class="buy-cloud" *ngIf="order.orderType === 'buy'" fxLayout="row">
                <i class="fa fa-long-arrow-up buy-arrow" aria-hidden="true"></i>
                <span>BUY</span>
              </div>
              <div class="sell-cloud" *ngIf="order.orderType === 'sell'" fxLayout="row">
                <i class="fa fa-long-arrow-down sell-arrow" aria-hidden="true"></i>
                <span>SELL</span>
              </div>
              <div fxLayout="column" fxLayoutAlign="center">
                {{order.value}} {{tokenSymbol}} ({{order.value * order.price}} ETH)
              </div>
            </div>
            <div fxLayout="row">
              <div *ngIf="currentOwner === order.owner" class="lock-button transition-fast" (mouseenter)="styleRow($event)"
                      (mouseleave)="styleRow($event)" (click)="lockOrder($event, order.orderType, order.id)">
                CANCEL
              </div>
              <span fxLayout="column" fxLayoutAlign="center">{{order.price}} {{tokenSymbol}}/ETH</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <button id="add-order-button" md-fab (click)="openAddOrderDialog()">+</button>
</div>
